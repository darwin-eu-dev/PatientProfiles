[{"path":[]},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/CONTRIBUTING.html","id":"filing-issues","dir":"","previous_headings":"","what":"Filing issues","title":"Contributing to PatientProfiles","text":"found bug, question, want suggest new feature please open issue. reporting bug, reprex much appreciated. contributing either documentation code, please make sure open issue beforehand identify needs done .","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/CONTRIBUTING.html","id":"documenting-the-package","dir":"","previous_headings":"Filing issues","what":"Documenting the package","title":"Contributing to PatientProfiles","text":"Run update check package documentation: Note devtools::check_man() return warnings. commit limited package documentation, running sufficient (although running devtools::check() always generally good idea submitting pull request.","code":"devtools::document()  devtools::run_examples() devtools::build_readme() devtools::build_vignettes() devtools::check_man()"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/CONTRIBUTING.html","id":"run-tests","dir":"","previous_headings":"Filing issues","what":"Run tests","title":"Contributing to PatientProfiles","text":"starting contribute code, first make sure package tests passing. raise issue going (although please first make sure packages imports suggests installed). contribute code, make sure current tests add continue pass. package tests can run together : Code add new functionality accompanied tests. Code coverage can checked using:","code":"devtools::test() # note, you may first have to detach the package # detach(\"package:PatientProfiles\", unload=TRUE) devtools::test_coverage()"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/CONTRIBUTING.html","id":"adhere-to-code-style","dir":"","previous_headings":"Filing issues","what":"Adhere to code style","title":"Contributing to PatientProfiles","text":"Please adhere code style adding new code. though restyle code unrelated pull request make code review difficult.","code":"lintr::lint_package(\".\",                     linters = lintr::linters_with_defaults(                       lintr::object_name_linter(styles = \"camelCase\")                     ) )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/CONTRIBUTING.html","id":"run-check-before-opening-a-pull-request","dir":"","previous_headings":"Filing issues","what":"Run check() before opening a pull request","title":"Contributing to PatientProfiles","text":"opening pull request please make sure run: warnings seen.","code":"devtools::check()"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"Apache License","title":"Apache License","text":"Version 2.0, January 2004 <http://www.apache.org/licenses/>","code":""},{"path":[]},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/LICENSE.html","id":"id_1-definitions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"1. Definitions","title":"Apache License","text":"“License” shall mean terms conditions use, reproduction, distribution defined Sections 1 9 document. “Licensor” shall mean copyright owner entity authorized copyright owner granting License. “Legal Entity” shall mean union acting entity entities control, controlled , common control entity. purposes definition, “control” means () power, direct indirect, cause direction management entity, whether contract otherwise, (ii) ownership fifty percent (50%) outstanding shares, (iii) beneficial ownership entity. “” (“”) shall mean individual Legal Entity exercising permissions granted License. “Source” form shall mean preferred form making modifications, including limited software source code, documentation source, configuration files. “Object” form shall mean form resulting mechanical transformation translation Source form, including limited compiled object code, generated documentation, conversions media types. “Work” shall mean work authorship, whether Source Object form, made available License, indicated copyright notice included attached work (example provided Appendix ). “Derivative Works” shall mean work, whether Source Object form, based (derived ) Work editorial revisions, annotations, elaborations, modifications represent, whole, original work authorship. purposes License, Derivative Works shall include works remain separable , merely link (bind name) interfaces , Work Derivative Works thereof. “Contribution” shall mean work authorship, including original version Work modifications additions Work Derivative Works thereof, intentionally submitted Licensor inclusion Work copyright owner individual Legal Entity authorized submit behalf copyright owner. purposes definition, “submitted” means form electronic, verbal, written communication sent Licensor representatives, including limited communication electronic mailing lists, source code control systems, issue tracking systems managed , behalf , Licensor purpose discussing improving Work, excluding communication conspicuously marked otherwise designated writing copyright owner “Contribution.” “Contributor” shall mean Licensor individual Legal Entity behalf Contribution received Licensor subsequently incorporated within Work.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/LICENSE.html","id":"id_2-grant-of-copyright-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"2. Grant of Copyright License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable copyright license reproduce, prepare Derivative Works , publicly display, publicly perform, sublicense, distribute Work Derivative Works Source Object form.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/LICENSE.html","id":"id_3-grant-of-patent-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"3. Grant of Patent License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable (except stated section) patent license make, made, use, offer sell, sell, import, otherwise transfer Work, license applies patent claims licensable Contributor necessarily infringed Contribution(s) alone combination Contribution(s) Work Contribution(s) submitted. institute patent litigation entity (including cross-claim counterclaim lawsuit) alleging Work Contribution incorporated within Work constitutes direct contributory patent infringement, patent licenses granted License Work shall terminate date litigation filed.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/LICENSE.html","id":"id_4-redistribution","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"4. Redistribution","title":"Apache License","text":"may reproduce distribute copies Work Derivative Works thereof medium, without modifications, Source Object form, provided meet following conditions: () must give recipients Work Derivative Works copy License; (b) must cause modified files carry prominent notices stating changed files; (c) must retain, Source form Derivative Works distribute, copyright, patent, trademark, attribution notices Source form Work, excluding notices pertain part Derivative Works; (d) Work includes “NOTICE” text file part distribution, Derivative Works distribute must include readable copy attribution notices contained within NOTICE file, excluding notices pertain part Derivative Works, least one following places: within NOTICE text file distributed part Derivative Works; within Source form documentation, provided along Derivative Works; , within display generated Derivative Works, wherever third-party notices normally appear. contents NOTICE file informational purposes modify License. may add attribution notices within Derivative Works distribute, alongside addendum NOTICE text Work, provided additional attribution notices construed modifying License. may add copyright statement modifications may provide additional different license terms conditions use, reproduction, distribution modifications, Derivative Works whole, provided use, reproduction, distribution Work otherwise complies conditions stated License.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/LICENSE.html","id":"id_5-submission-of-contributions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"5. Submission of Contributions","title":"Apache License","text":"Unless explicitly state otherwise, Contribution intentionally submitted inclusion Work Licensor shall terms conditions License, without additional terms conditions. Notwithstanding , nothing herein shall supersede modify terms separate license agreement may executed Licensor regarding Contributions.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/LICENSE.html","id":"id_6-trademarks","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"6. Trademarks","title":"Apache License","text":"License grant permission use trade names, trademarks, service marks, product names Licensor, except required reasonable customary use describing origin Work reproducing content NOTICE file.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/LICENSE.html","id":"id_7-disclaimer-of-warranty","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"7. Disclaimer of Warranty","title":"Apache License","text":"Unless required applicable law agreed writing, Licensor provides Work (Contributor provides Contributions) “” BASIS, WITHOUT WARRANTIES CONDITIONS KIND, either express implied, including, without limitation, warranties conditions TITLE, NON-INFRINGEMENT, MERCHANTABILITY, FITNESS PARTICULAR PURPOSE. solely responsible determining appropriateness using redistributing Work assume risks associated exercise permissions License.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/LICENSE.html","id":"id_8-limitation-of-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"8. Limitation of Liability","title":"Apache License","text":"event legal theory, whether tort (including negligence), contract, otherwise, unless required applicable law (deliberate grossly negligent acts) agreed writing, shall Contributor liable damages, including direct, indirect, special, incidental, consequential damages character arising result License use inability use Work (including limited damages loss goodwill, work stoppage, computer failure malfunction, commercial damages losses), even Contributor advised possibility damages.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/LICENSE.html","id":"id_9-accepting-warranty-or-additional-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"9. Accepting Warranty or Additional Liability","title":"Apache License","text":"redistributing Work Derivative Works thereof, may choose offer, charge fee , acceptance support, warranty, indemnity, liability obligations /rights consistent License. However, accepting obligations, may act behalf sole responsibility, behalf Contributor, agree indemnify, defend, hold Contributor harmless liability incurred , claims asserted , Contributor reason accepting warranty additional liability. END TERMS CONDITIONS","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/LICENSE.html","id":"appendix-how-to-apply-the-apache-license-to-your-work","dir":"","previous_headings":"","what":"APPENDIX: How to apply the Apache License to your work","title":"Apache License","text":"apply Apache License work, attach following boilerplate notice, fields enclosed brackets [] replaced identifying information. (Don’t include brackets!) text enclosed appropriate comment syntax file format. also recommend file class name description purpose included “printed page” copyright notice easier identification within third-party archives.","code":"Copyright [yyyy] [name of copyright owner]  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0  Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License."},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/ExampleAnalysis.html","id":"set-up","dir":"Articles","previous_headings":"","what":"Set up","title":"Using PatientProfiles for analysis","text":"Let’s start loading required packages creating cdm reference Eunomia dataset.","code":"library(DBI) library(duckdb) library(CDMConnector) library(CodelistGenerator) library(dplyr) library(PatientProfiles) library(ggplot2)  con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir()) #> attempting to extract and load /tmp/Rtmpb5onO3/GiBleed_5.3.zip  cdm <- CDMConnector::cdm_from_con(   con = con,   cdm_schema = \"main\",   write_schema = \"main\" )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/ExampleAnalysis.html","id":"create-bespoke-cohorts","dir":"Articles","previous_headings":"","what":"Create bespoke cohorts","title":"Using PatientProfiles for analysis","text":"start, ’ll define two drug cohorts. cohorts include drug exposures celecoxib diclofenac, respectively. keep things simple cohort entry correspond drug exposure record (.e. individual can enter cohort multiple times won’t concatenate records). ’ll include two cohorts cohort table, cohort definition id 1 celecoxib 2 diclofenac. cohorts ’ll also require included aged 40 50. addAge function facilitate incorporating requirement. well two drug cohorts, ’ll define cohort people condition occurrence gastrointestinal (GI) bleeding.","code":"celecoxib_codes <- getDescendants(cdm, conceptId = 1118084) diclofenac_codes <- getDescendants(cdm, conceptId = 1124300)  # celecoxib cdm$celecoxib <- cdm$drug_era %>%    inner_join(celecoxib_codes %>%                 select(concept_id),              by = c(\"drug_concept_id\"=\"concept_id\"),               copy = TRUE) %>%    addAge(cdm, indexDate = \"drug_era_start_date\") %>%    filter(age >= 40 & age <= 50) %>%    rename(\"subject_id\" = \"person_id\",           \"cohort_start_date\" = \"drug_era_start_date\",           \"cohort_end_date\" = \"drug_era_end_date\") %>%    mutate(cohort_definition_id = 1L) %>%    select(\"cohort_definition_id\", \"subject_id\",           \"cohort_start_date\", \"cohort_end_date\") %>%    compute()  # diclofenac cdm$diclofenac <- cdm$drug_era %>%    inner_join(diclofenac_codes %>%                 select(concept_id),              by = c(\"drug_concept_id\"=\"concept_id\"),               copy = TRUE) %>%    addAge(cdm, indexDate = \"drug_era_start_date\") %>%    filter(age >= 40 & age <= 50) %>%    rename(\"subject_id\" = \"person_id\",           \"cohort_start_date\" = \"drug_era_start_date\",           \"cohort_end_date\" = \"drug_era_end_date\") %>%    mutate(cohort_definition_id = 2L) %>%    select(\"cohort_definition_id\", \"subject_id\",           \"cohort_start_date\", \"cohort_end_date\") %>%    compute()  cdm$exposure_cohort <- union_all(cdm$celecoxib,                          cdm$diclofenac) %>%    compute() cdm$exposure_cohort <- newGeneratedCohortSet(cdm$exposure_cohort) gi_bleed_codes <- getDescendants(cdm, conceptId = 192671)  # gi_bleed cdm$gi_bleed <- cdm$condition_occurrence %>%    inner_join(gi_bleed_codes %>%                 select(concept_id),              by = c(\"condition_concept_id\"=\"concept_id\"),               copy = TRUE) %>%    rename(\"subject_id\" = \"person_id\",           \"cohort_start_date\" = \"condition_start_date\") %>%    mutate(cohort_end_date = cohort_start_date) %>%    mutate(cohort_definition_id = 1L) %>%    select(\"cohort_definition_id\", \"subject_id\",           \"cohort_start_date\", \"cohort_end_date\") %>%    compute() cdm$gi_bleed <- newGeneratedCohortSet(cdm$gi_bleed)"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/ExampleAnalysis.html","id":"summarising-cohort-characteristics","dir":"Articles","previous_headings":"Create bespoke cohorts","what":"Summarising cohort characteristics","title":"Using PatientProfiles for analysis","text":"can use addDemographics help describe characteristics cohorts","code":"cdm$exposure_cohort %>%   addDemographics(cdm) %>%    collect() %>%    mutate(name = case_when(   cohort_definition_id == 1 ~ \"celecoxib\",   cohort_definition_id == 2 ~ \"diclofenac\",   .default = as.character(cohort_definition_id) )) %>%    collect()%>%    ggplot() +   facet_grid(sex ~ name) +   geom_histogram(aes(age), binwidth = 1,                  colour = \"black\")+   theme_bw() cdm$gi_bleed %>%   addDemographics(cdm) %>%    collect()%>%    mutate(name = case_when(   cohort_definition_id == 1 ~ \"gi_bleed\",   .default = as.character(cohort_definition_id) )) %>%    collect()%>%    ggplot() +   facet_grid(sex ~ name) +   geom_histogram(aes(age), binwidth = 1,                  colour = \"black\")+   theme_bw()"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/ExampleAnalysis.html","id":"cohort-intersection","dir":"Articles","previous_headings":"Create bespoke cohorts","what":"Cohort intersection","title":"Using PatientProfiles for analysis","text":"can also see whether individuals GI bleeding time period relative cohort start date using flagCohortPresence function. case ’ll look two time periods, cohort start date . can also see time GI bleeding using timeToCohort","code":"cdm$exposure_cohort <- cdm$exposure_cohort %>%    addCohortIntersectFlag(cdm = cdm,                          targetCohortTable = \"gi_bleed\",                           indexDate = \"cohort_start_date\",                          window = c(-Inf, -1),                           nameStyle = \"gi_bleed_history\") %>%    addCohortIntersectFlag(cdm = cdm,                          targetCohortTable = \"gi_bleed\",                           indexDate = \"cohort_start_date\",                          window = c(0, Inf),                           nameStyle = \"gi_bleed_outcome\") cdm$exposure_cohort %>%    group_by(gi_bleed_history, gi_bleed_outcome) %>%    count() %>%    collect() #> # A tibble: 2 × 3 #> # Groups:   gi_bleed_history, gi_bleed_outcome [2] #>   gi_bleed_history gi_bleed_outcome     n #>              <dbl>            <dbl> <dbl> #> 1                0                0   884 #> 2                0                1   196 cdm$exposure_cohort %>%    addCohortIntersectTime(cdm = cdm,                          targetCohortTable = \"gi_bleed\",                           window = c(0, Inf),                           nameStyle = \"time_to_event\") %>%    mutate(name = case_when(   cohort_definition_id == 1 ~ \"celecoxib\",   cohort_definition_id == 2 ~ \"diclofenac\",   .default = as.character(cohort_definition_id) )) %>%     group_by(name) %>%     summarise(min_time_to_event= min(time_to_event, na.rm=TRUE),             q25_time_to_event = quantile(time_to_event, 0.25, na.rm=TRUE),             median_time_to_event = median(time_to_event, na.rm=TRUE),             q75_time_to_event = quantile(time_to_event, 0.75, na.rm=TRUE),             max_time_to_event = max(time_to_event, na.rm=TRUE)) %>%     collect() %>%    ggplot(aes(x = name, group = name,              fill = name)) +   geom_boxplot(aes(     lower = q25_time_to_event,      upper = q75_time_to_event,      middle = median_time_to_event,      ymin = min_time_to_event,      ymax = max_time_to_event),     stat = \"identity\", width = 0.5) +    theme_bw()+    theme(legend.position = \"none\") +   ylim(0, NA)+   xlab(\"\")+   ylab(\"Time to GI bleeding\")"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/addCohortIntersections.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Get cohort intersections","text":"vignette present functions package can used get intersections cohorts. can useful, instance, want identify patients previous conditions. PatientProfiles package designed work data OMOP CDM format, first step create reference data using DBI CDMConnector packages. connection Postgres database look like: vignette work simulated data generated mockPatientProfiles() function provided package, mimics database formatted OMOP. mock dataset following cohort tables:","code":"library(DBI) library(CDMConnector)  # The input arguments provided are for illustrative purposes only and do not provide access to any database.  con <- DBI::dbConnect(RPostgres::Postgres(),                       dbname = \"omop_cdm\",                                 host = \"10.80.192.00\",                       user = \"user_name\",                       password = \"user_pasword\" )  cdm <- CDMConnector::cdm_from_con(con,                                   cdm_schema = \"main\",                                   write_schema = \"main\",                                   cohort_tables = \"cohort_example\" ) library(PatientProfiles) library(duckdb) library(tibble) library(dplyr)  cdm <- mockPatientProfiles(   patient_size = 1000,    drug_exposure_size = 1000 ) cdm$cohort1 %>%   glimpse() ## Rows: ?? ## Columns: 4 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id <dbl> 1, 1, 1, 2 ## $ subject_id           <dbl> 1, 1, 2, 3 ## $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 ## $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-02-02, 2020-03-01 cdm$cohort2 %>%   glimpse() ## Rows: ?? ## Columns: 4 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id <dbl> 1, 1, 2, 3, 1 ## $ subject_id           <dbl> 1, 3, 1, 2, 1 ## $ cohort_start_date    <date> 2019-12-30, 2020-01-01, 2020-05-25, 2020-01-01, 2… ## $ cohort_end_date      <date> 2019-12-30, 2020-01-01, 2020-05-25, 2020-01-01, 2…"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/addCohortIntersections.html","id":"example-addcohortintersectflag-and-addcohortintersectcount-functions","dir":"Articles","previous_headings":"","what":"Example: addCohortIntersectFlag and addCohortIntersectCount functions","title":"Get cohort intersections","text":"addCohortIntersectFlag(): adds binary column indicate intersection cohort time frame. Suppose cohort2 definition_id = 1 contains stroke occurrences. want exclude patients cohort1 stroke event last 180 days entering cohort, can use addCohortIntersectFlag() like : addCohortIntersectCount(): adds column indicates number intersections certain time window. can use function count number occurrences event interest different time windows entering study population. example, can look number strokes 0-90 day, 90-365 day, prior history windows: Let us comment targetEndDate functionality found addCohortIntersectCount() addCohortIntersectFlag() functions. , three reference dates can specified: * indexDate: date primary cohort table, contains individuals want find intersection events * targetStartDate: date events table used intersection * targetEndDate: date events table used intersection default, indexDate = cohort_start_date, targetStartDate = cohort_start_date targetEndDate = cohort_end_date. means , intersecting two cohorts specify window = c(-30,-1), get events intersecting cohort happening 30 days previous cohort start date main cohort. Namely: get two events subject_id = 1, one starting ending 2010-02-27, within window index date 2010-03-01; one starting 2010-01-25 ending 2012-03-25. individual subject_id = 2 intersecting events interest. Note , specifications default, pick one event (second one), incident window interest, overlaps . Indeed, event start date index date main cohort end date , regarded intersecting. However, interested events starting window interest. screen , can set targetEndDate = cohort_start_date. Now pick event starts 2010-01-25, 30 days index date main cohort, 2010-03-01. input targetEndDate allows, therefore, select whether perform intersection “overlapping” “incident” way. functions addCohortIntersectTime() addCohortIntersectDate(), need specific date target cohort calculate time outputs. Therefore, targetDate needs specified, set “cohort_start_date” default.","code":"cdm$cohort1WashOut <- cdm$cohort1 %>%   addCohortIntersectFlag(     cdm = cdm,     targetCohortTable = \"cohort2\",     window = list(c(-180,-1)),     targetCohortId = 1,   ) %>%   filter(cohort_1_m180_to_m1 == 0)  cdm$cohort1WashOut %>%   glimpse() ## Rows: ?? ## Columns: 5 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id <dbl> 2, 1 ## $ subject_id           <dbl> 3, 2 ## $ cohort_start_date    <date> 2020-01-01, 2020-01-02 ## $ cohort_end_date      <date> 2020-03-01, 2020-02-02 ## $ cohort_1_m180_to_m1  <dbl> 0, 0 cdm$cohort1StrokeCounts <- cdm$cohort1 %>%   addCohortIntersectCount(cdm = cdm,     targetCohortTable = \"cohort2\",     window = list(c(-Inf,-366), c(-365,-181), c(-180,-1)),     targetCohortId = 1   )  cdm$cohort1StrokeCounts %>%   glimpse() ## Rows: ?? ## Columns: 7 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id  <dbl> 1, 1, 2, 1 ## $ subject_id            <dbl> 1, 1, 3, 2 ## $ cohort_start_date     <date> 2020-01-01, 2020-06-01, 2020-01-01, 2020-01-02 ## $ cohort_end_date       <date> 2020-04-01, 2020-08-01, 2020-03-01, 2020-02-02 ## $ cohort_1_minf_to_m366 <dbl> 0, 0, 0, 0 ## $ cohort_1_m180_to_m1   <dbl> 1, 2, 0, 0 ## $ cohort_1_m365_to_m181 <dbl> 0, 0, 0, 0 # This will be our \"main\" cohort   cohort1 <- tibble::tibble(     cohort_definition_id = 1,     subject_id = c(\"1\", \"2\"),     cohort_start_date = c(       as.Date(\"2010-03-01\"),       as.Date(\"2012-03-01\")     ),     cohort_end_date = c(       as.Date(\"2015-01-01\"),       as.Date(\"2016-03-01\")     )   )  # This is the cohort with the events we are interested in   cohort2 <- tibble::tibble(     cohort_definition_id = 1,     subject_id = c(\"1\", \"1\", \"1\", \"2\"),     cohort_start_date = c(       as.Date(\"2010-03-03\"),       as.Date(\"2010-02-27\"),       as.Date(\"2010-01-25\"),       as.Date(\"2013-01-03\")     ),     cohort_end_date = c(       as.Date(\"2010-03-03\"),       as.Date(\"2010-02-27\"),       as.Date(\"2012-03-25\"),       as.Date(\"2013-01-03\")     )   )    cdm <- mockPatientProfiles(     cohort1 = cohort1,     cohort2 = cohort2   )      cdm$cohort1 <- cdm$cohort1 %>% addCohortIntersectCount(cdm, targetCohortTable = \"cohort2\", window = list(c(-30,-1)))   cdm$cohort1 ## # Source:   table<dbplyr_021> [2 x 5] ## # Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ##   cohort_definition_id subject_id cohort_start_date cohort_end_date ##                  <dbl> <chr>      <date>            <date>          ## 1                    1 1          2010-03-01        2015-01-01      ## 2                    1 2          2012-03-01        2016-03-01      ## # ℹ 1 more variable: cohort_1_m30_to_m1 <dbl> cdm$cohort1 <- cdm$cohort1 %>% addCohortIntersectCount(cdm, targetCohortTable = \"cohort2\", window = list(c(-30,-1)), targetEndDate = \"cohort_start_date\")   cdm$cohort1 ## # Source:   table<dbplyr_026> [2 x 5] ## # Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ##   cohort_definition_id subject_id cohort_start_date cohort_end_date ##                  <dbl> <chr>      <date>            <date>          ## 1                    1 1          2010-03-01        2015-01-01      ## 2                    1 2          2012-03-01        2016-03-01      ## # ℹ 1 more variable: cohort_1_m30_to_m1 <dbl>"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/addCohortIntersections.html","id":"example-addcohortintersecttime-function","dir":"Articles","previous_headings":"","what":"Example: addCohortIntersectTime function","title":"Get cohort intersections","text":"addCohortIntersectTime(): adds new column indicates number days subject intersects another cohort specific time frame. multiple intersections, one computed, either first latest one time window (“order” argument). function can utilized calculate time event interest, time first stroke index date. patient experience event, function return NA.","code":"cdm$cohort1TimeTo <- cdm$cohort1 %>%   addCohortIntersectTime(cdm = cdm,     targetCohortTable = \"cohort2\",     targetCohortId = 1,     order = \"first\",   )  cdm$cohort1TimeTo %>%   glimpse() ## Rows: ?? ## Columns: 6 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id <dbl> 1, 1 ## $ subject_id           <chr> \"1\", \"2\" ## $ cohort_start_date    <date> 2010-03-01, 2012-03-01 ## $ cohort_end_date      <date> 2015-01-01, 2016-03-01 ## $ cohort_1_m30_to_m1   <dbl> 1, 0 ## $ cohort_1_0_to_inf    <dbl> 2, 308"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/addCohortIntersections.html","id":"example-addcohortintersectdate-function","dir":"Articles","previous_headings":"","what":"Example: addCohortIntersectDate function","title":"Get cohort intersections","text":"addCohortIntersectDate(): appends column containing start date cohorts present certain window. function can handy obtaining date next occurrence specific event. instance, suppose cohort1 comprises patients enrolled received first vaccine dose. use function obtain date second dose cohort vaccine records (e.g. cohort2): Please note new columns added table (function presented) format cohort_“cohort_definition_id”_ “time window”. window number negative, “m” added front indicate sign added positive numbers.","code":"cdm$cohort1NextEvent <- cdm$cohort1 %>%   addCohortIntersectDate(cdm = cdm,     targetCohortTable = \"cohort2\",     order = \"first\",     targetCohortId = 1,     window = c(1,Inf)   )  cdm$cohort1NextEvent %>%   glimpse() ## Rows: ?? ## Columns: 6 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id <dbl> 1, 1 ## $ subject_id           <chr> \"1\", \"2\" ## $ cohort_start_date    <date> 2010-03-01, 2012-03-01 ## $ cohort_end_date      <date> 2015-01-01, 2016-03-01 ## $ cohort_1_m30_to_m1   <dbl> 1, 0 ## $ cohort_1_1_to_inf    <date> 2010-03-03, 2013-01-03"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/addCohortIntersections.html","id":"example-addcohortintersect-function","dir":"Articles","previous_headings":"","what":"Example: addCohortIntersect function","title":"Get cohort intersections","text":"addCohortIntersect(): Compute intersect target cohort, can compute number occurrences, flag presence, certain date /time difference. can use function compute intersect information target cohort. default return output countCohortOccurrences(), dateOfCohort(), flagCohortPresence() timeToCohort() time frame. Use function want append intersection information function. information function , can read example. can also control columns append data using flag, count, date time options function, want everything. example want cohort count flag can use example.","code":"cdm$cohort1CohortIntersect <- cdm$cohort1 %>%   addCohortIntersect(cdm = cdm,     targetCohortTable = \"cohort2\",     order = \"first\",     targetCohortId = 1,     window = c(1,Inf)   ) cdm$cohort1CohortIntersect %>%   glimpse() ## Rows: ?? ## Columns: 9 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id    <dbl> 1, 1 ## $ subject_id              <chr> \"1\", \"2\" ## $ cohort_start_date       <date> 2010-03-01, 2012-03-01 ## $ cohort_end_date         <date> 2015-01-01, 2016-03-01 ## $ cohort_1_m30_to_m1      <dbl> 1, 0 ## $ count_cohort_1_1_to_inf <dbl> 2, 1 ## $ flag_cohort_1_1_to_inf  <dbl> 1, 1 ## $ date_cohort_1_1_to_inf  <date> 2010-01-25, 2013-01-03 ## $ time_cohort_1_1_to_inf  <dbl> -35, 308 cdm$cohort1CohortIntersect <- cdm$cohort1 %>%   addCohortIntersect(cdm = cdm,     targetCohortTable = \"cohort2\",     order = \"first\",     targetCohortId = 1,     window = c(1,Inf),     flag = TRUE,     count = TRUE,     date = FALSE,     time = FALSE   ) cdm$cohort1CohortIntersect %>%   glimpse() ## Rows: ?? ## Columns: 7 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id    <dbl> 1, 1 ## $ subject_id              <chr> \"1\", \"2\" ## $ cohort_start_date       <date> 2010-03-01, 2012-03-01 ## $ cohort_end_date         <date> 2015-01-01, 2016-03-01 ## $ cohort_1_m30_to_m1      <dbl> 1, 0 ## $ count_cohort_1_1_to_inf <dbl> 2, 1 ## $ flag_cohort_1_1_to_inf  <dbl> 1, 1"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/addPatientCharacteristics.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Get patients' characteristics","text":"vignette show different functions get characteristics (e.g. age, sex, prior history…) subjects OMOP CDM tables cohort tables. can useful explanatory analysis well calling functions complex analyses. PatientProfiles package designed work data OMOP CDM format, first step create reference data using DBI CDMConnector packages. connection Postgres database look like: example work simulated data generated mockPatientProfiles() function provided package, mimics database formatted OMOP:","code":"library(DBI) library(CDMConnector)  # The input arguments provided are for illustrative purposes only and do not provide access to any database.  con <- DBI::dbConnect(RPostgres::Postgres(),                       dbname = \"omop_cdm\",                                 host = \"10.80.192.00\",                       user = \"user_name\",                       password = \"user_pasword\" )  cdm <- CDMConnector::cdm_from_con(con,                                   cdm_schema = \"main\",                                   write_schema = \"main\",                                   cohort_tables = \"cohort_example\" ) library(PatientProfiles) library(duckdb) library(tibble) library(dplyr)  cdm <- mockPatientProfiles(   patient_size = 1000,    drug_exposure_size = 1000 )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/addPatientCharacteristics.html","id":"example-get-characteristics-in-tables","dir":"Articles","previous_headings":"","what":"Example: get characteristics in tables","title":"Get patients' characteristics","text":"addAge(): adds new column input table containing patient’s age certain date, specified indexDate. Function allows set month /day birth patients missings can imposed subjects. , function can classify patient’s different age groups based argument ageGroup. Suppose want calculate age condition start date records condition_ocurrence table. Also, wan group patients 20-year age band 60 years old . addSex(): appends column input table indicating sex patient “Female” “Male”. First, can add sex patients table. information can used count occurrences condition_concept_id = 5 males aged 60 years older. can also stratify number events age, grouping patients 20-year age bands.","code":"cdm$condition_occurrence %>%   glimpse() ## Rows: ?? ## Columns: 5 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ condition_occurrence_id <int> 314, 970, 349, 234, 193, 919, 113, 277, 491, 9… ## $ person_id               <int> 314, 970, 349, 234, 193, 919, 113, 277, 491, 9… ## $ condition_concept_id    <int> 4, 5, 1, 2, 3, 4, 3, 2, 1, 2, 1, 5, 3, 4, 4, 1… ## $ condition_start_date    <date> 2005-08-25, 2007-02-15, 2009-02-15, 2008-05-0… ## $ condition_end_date      <date> 2006-06-14, 2007-06-05, 2011-06-24, 2009-01-0… cdm$condition_occurrence_mod <- cdm$condition_occurrence %>%   addAge(     cdm = cdm,     ageDefaultMonth = 1,     ageDefaultDay = 6,     indexDate = \"condition_start_date\",     ageGroup = list(\"ageBand_20\" =                        list(\"0 to 19\"  = c(0, 19),                             \"20 to 39\" = c(20, 39),                             \"40 to 59\" = c(40, 59),                             \"60 to 79\" = c(60, 79),                             \"80 to 99\" = c(80, 99),                            \">= 100\"   = c(100, 150)                       ),                     \"ageThreshold_60\" =                        list(\"less60\" = c(0,59),                            \"more60\" = c(60,150)                       )     )   )  cdm$condition_occurrence_mod %>%   glimpse() ## Rows: ?? ## Columns: 8 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ condition_occurrence_id <int> 314, 234, 277, 26, 276, 656, 275, 249, 150, 9,… ## $ person_id               <int> 314, 234, 277, 26, 276, 656, 275, 249, 150, 9,… ## $ condition_concept_id    <int> 4, 2, 2, 1, 5, 3, 4, 2, 4, 5, 2, 2, 2, 3, 1, 1… ## $ condition_start_date    <date> 2005-08-25, 2008-05-03, 2007-04-26, 2009-01-0… ## $ condition_end_date      <date> 2006-06-14, 2009-01-05, 2007-05-07, 2010-02-0… ## $ age                     <dbl> 58, 58, 23, 9, 77, 90, 71, 49, 55, 17, 40, 26,… ## $ ageBand_20              <chr> \"40 to 59\", \"40 to 59\", \"20 to 39\", \"0 to 19\",… ## $ ageThreshold_60         <chr> \"less60\", \"less60\", \"less60\", \"less60\", \"more6… cdm$condition_occurrence_mod <- cdm$condition_occurrence_mod %>%   addSex(     cdm = cdm   )  cdm$condition_occurrence_mod %>%    glimpse() ## Rows: ?? ## Columns: 9 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ condition_occurrence_id <int> 314, 234, 277, 26, 276, 656, 275, 249, 150, 9,… ## $ person_id               <int> 314, 234, 277, 26, 276, 656, 275, 249, 150, 9,… ## $ condition_concept_id    <int> 4, 2, 2, 1, 5, 3, 4, 2, 4, 5, 2, 2, 2, 3, 1, 1… ## $ condition_start_date    <date> 2005-08-25, 2008-05-03, 2007-04-26, 2009-01-0… ## $ condition_end_date      <date> 2006-06-14, 2009-01-05, 2007-05-07, 2010-02-0… ## $ age                     <dbl> 58, 58, 23, 9, 77, 90, 71, 49, 55, 17, 40, 26,… ## $ ageBand_20              <chr> \"40 to 59\", \"40 to 59\", \"20 to 39\", \"0 to 19\",… ## $ ageThreshold_60         <chr> \"less60\", \"less60\", \"less60\", \"less60\", \"more6… ## $ sex                     <chr> \"Male\", \"Male\", \"Male\", \"Female\", \"Male\", \"Mal… num_conditions <- cdm$condition_occurrence_mod %>%   filter(     sex == \"Male\"   ) %>%   filter(     ageThreshold_60 == \"more60\"   ) %>%   filter(     condition_concept_id  == 5   ) %>%   group_by(     ageBand_20   ) %>%   summarise(     n = count(condition_occurrence_id)   )  num_conditions ## # Source:   SQL [2 x 2] ## # Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ##   ageBand_20     n ##   <chr>      <dbl> ## 1 60 to 79      28 ## 2 80 to 99      17"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/addPatientCharacteristics.html","id":"example-get-characteristics-in-cohort-tables","dir":"Articles","previous_headings":"","what":"Example: get characteristics in cohort tables","title":"Get patients' characteristics","text":"PatientProfiles functions can used OMOP CDM tables cohort tables. example see package functionalities applied cohort table: addInObservation(): adds new binary column input table, indicating whether subjects observed specific time. addPriorHistory(): appends column input table containing number days patient observation specified date. addFutureObservation(): adds column days future observation individual certain date can use first function obtain patients observation “cohort_start_date” subsequently get prior future observation days. Notice using argument “indexDate”, since already defaulted “cohort_start_date”. database allows multiple observation periods, ’s important note results previous functions based period “indexDate” falls within. patient observation specified date, addPriorHistory() addFutureObservation() functions return NA.","code":"cdm$cohort1 %>%   glimpse() ## Rows: ?? ## Columns: 4 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id <dbl> 1, 1, 1, 2 ## $ subject_id           <dbl> 1, 1, 2, 3 ## $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 ## $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-02-02, 2020-03-01 cdm$cohort1 <- cdm$cohort1 %>%   addInObservation(     cdm = cdm   ) %>%   filter(     in_observation == 1   ) %>%   addPriorHistory(     cdm = cdm   ) %>%   addFutureObservation(     cdm = cdm   )  cdm$cohort1 %>%   glimpse() ## Rows: ?? ## Columns: 7 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id <dbl> 2, 1, 1, 1 ## $ subject_id           <dbl> 3, 1, 2, 1 ## $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 ## $ cohort_end_date      <date> 2020-03-01, 2020-08-01, 2020-02-02, 2020-04-01 ## $ in_observation       <dbl> 1, 1, 1, 1 ## $ prior_history        <dbl> 4635, 5350, 4168, 5198 ## $ future_observation   <dbl> 36925, 18232, 17348, 18384"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/articles/addPatientCharacteristics.html","id":"example-get-all-characteristics-at-once","dir":"Articles","previous_headings":"","what":"Example: get all characteristics at once","title":"Get patients' characteristics","text":"addDemographics(): can used add features presented vignette (except addInObservation()) , tables cohort tables. want get age, sex prior history individuals day enter cohort, can use function addDemographics() follows","code":"cdm$cohort2 %>%   glimpse() ## Rows: ?? ## Columns: 4 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id <dbl> 1, 1, 2, 3, 1 ## $ subject_id           <dbl> 1, 3, 1, 2, 1 ## $ cohort_start_date    <date> 2019-12-30, 2020-01-01, 2020-05-25, 2020-01-01, 2… ## $ cohort_end_date      <date> 2019-12-30, 2020-01-01, 2020-05-25, 2020-01-01, 2… cdm$cohort2 <- cdm$cohort2 %>%   addDemographics(     cdm = cdm,     age = TRUE,     ageName = \"age\",     ageGroup = NULL,     sex = TRUE,     sexName = \"sex\",     priorHistory = TRUE,     priorHistoryName = \"prior_history\",     futureObservation = FALSE,   )  cdm$cohort2 %>%   glimpse() ## Rows: ?? ## Columns: 7 ## Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] ## $ cohort_definition_id <dbl> 1, 1, 3, 2, 1 ## $ subject_id           <dbl> 3, 1, 2, 1, 1 ## $ cohort_start_date    <date> 2020-01-01, 2020-05-25, 2020-01-01, 2020-05-25, 2… ## $ cohort_end_date      <date> 2020-01-01, 2020-05-25, 2020-01-01, 2020-05-25, 2… ## $ age                  <dbl> 43, 41, 51, 41, 40 ## $ sex                  <chr> \"Female\", \"Male\", \"Male\", \"Male\", \"Male\" ## $ prior_history        <dbl> 4635, 5343, 4167, 5343, 5196"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Marti Catala. Author, maintainer. Yuchen Guo. Author. Mike Du. Author. Kim Lopez-Guell. Author. Edward Burn. Author.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Catala M, Guo Y, Du M, Lopez-Guell K, Burn E (2023). PatientProfiles: Identify characteristics patients OMOP Common Data Model. R package version 0.1.0, https://oxford-pharmacoepi.github.io/PatientProfiles/.","code":"@Manual{,   title = {PatientProfiles: Identify characteristics of patients in the OMOP Common Data Model},   author = {Marti Catala and Yuchen Guo and Mike Du and Kim Lopez-Guell and Edward Burn},   year = {2023},   note = {R package version 0.1.0},   url = {https://oxford-pharmacoepi.github.io/PatientProfiles/}, }"},{"path":[]},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/index.html","id":"package-overview","dir":"","previous_headings":"","what":"Package overview","title":"Identify characteristics of patients in the OMOP Common Data Model","text":"PatientProfiles contains functions adding characteristics OMOP CDM tables containing patient level data (e.g. condition_occurrence, drug_exposure, ) OMOP CDM cohort tables. characteristics can added include individual´s sex, age (relative date table), days prior history. Time varying characteristics, age, can estimated relative dates corresponding table. additition, PatientProfiles also provides functionality identifying intersections cohort table OMOP CDM tables containing patient level data cohort tables.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/index.html","id":"package-installation","dir":"","previous_headings":"","what":"Package installation","title":"Identify characteristics of patients in the OMOP Common Data Model","text":"can install latest version PatientProfiles like :","code":"install.packages(\"remotes\") remotes::install_github(\"oxford-pharmacoepi/PatientProfiles\")"},{"path":[]},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/index.html","id":"create-a-reference-to-data-in-the-omop-cdm-format","dir":"","previous_headings":"Example usage","what":"Create a reference to data in the OMOP CDM format","title":"Identify characteristics of patients in the OMOP Common Data Model","text":"PatientProfiles package designed work data OMOP CDM format, first step create reference data using CDMConnector package. Creating connection Postgres database example look like: see create reference database please consult CDMConnector package documentation. example though ’ll work simulated data, ’ll generate example cdm reference like :","code":"library(CDMConnector) library(PatientProfiles) library(dplyr) con <- DBI::dbConnect(   RPostgres::Postgres(),   dbname = Sys.getenv(\"CDM5_POSTGRESQL_DBNAME\"),   host = Sys.getenv(\"CDM5_POSTGRESQL_HOST\"),   user = Sys.getenv(\"CDM5_POSTGRESQL_USER\"),   password = Sys.getenv(\"CDM5_POSTGRESQL_PASSWORD\") )  cdm <- cdm_from_con(   con,    cdm_schema = Sys.getenv(\"CDM5_POSTGRESQL_CDM_SCHEMA\"),    write_schema = Sys.getenv(\"CDM5_POSTGRESQL_RESULT_SCHEMA\") ) cdm <- mockPatientProfiles(patient_size = 1000, drug_exposure_size = 1000)"},{"path":[]},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/index.html","id":"adding-chartacteristics-to-patient-level-data","dir":"","previous_headings":"Example usage > Adding individuals´ chartacteristics","what":"Adding chartacteristics to patient-level data","title":"Identify characteristics of patients in the OMOP Common Data Model","text":"Say wanted get individuals´sex age condition start date records condition_occurrence table. can use addAge addSex functions : , example, limit data males aged 18 65","code":"cdm$condition_occurrence %>%    glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ condition_occurrence_id <int> 314, 970, 349, 234, 193, 919, 113, 277, 491, 9… #> $ person_id               <int> 314, 970, 349, 234, 193, 919, 113, 277, 491, 9… #> $ condition_concept_id    <int> 4, 5, 1, 2, 3, 4, 3, 2, 1, 2, 1, 5, 3, 4, 4, 1… #> $ condition_start_date    <date> 2005-08-25, 2007-02-15, 2009-02-15, 2008-05-0… #> $ condition_end_date      <date> 2006-06-14, 2007-06-05, 2011-06-24, 2009-01-0…  cdm$condition_occurrence <- cdm$condition_occurrence  %>%    addAge(cdm = cdm, indexDate = \"condition_start_date\")  %>%    addSex(cdm)  cdm$condition_occurrence %>%    glimpse() #> Rows: ?? #> Columns: 7 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ condition_occurrence_id <int> 314, 234, 277, 26, 276, 656, 275, 249, 150, 9,… #> $ person_id               <int> 314, 234, 277, 26, 276, 656, 275, 249, 150, 9,… #> $ condition_concept_id    <int> 4, 2, 2, 1, 5, 3, 4, 2, 4, 5, 2, 2, 2, 3, 1, 1… #> $ condition_start_date    <date> 2005-08-25, 2008-05-03, 2007-04-26, 2009-01-0… #> $ condition_end_date      <date> 2006-06-14, 2009-01-05, 2007-05-07, 2010-02-0… #> $ age                     <dbl> 58, 58, 23, 10, 77, 90, 71, 49, 55, 17, 40, 26… #> $ sex                     <chr> \"Male\", \"Male\", \"Male\", \"Female\", \"Male\", \"Mal… cdm$condition_occurrence  %>%   filter(age >= 18 & age <= 65) %>%   filter(sex == \"Male\") #> # Source:   SQL [?? x 7] #> # Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #>    condition_occurrence_id person_id condition_concept_id condition_start_date #>                      <int>     <int>                <int> <date>               #>  1                     314       314                    4 2005-08-25           #>  2                     234       234                    2 2008-05-03           #>  3                     277       277                    2 2007-04-26           #>  4                     249       249                    2 2014-12-08           #>  5                     150       150                    4 2011-08-31           #>  6                     406       406                    3 2009-02-11           #>  7                     438       438                    1 2008-09-26           #>  8                     536       536                    4 2009-11-11           #>  9                     872       872                    2 2006-10-19           #> 10                     424       424                    4 2009-01-12           #> # ℹ more rows #> # ℹ 3 more variables: condition_end_date <date>, age <dbl>, sex <chr>"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/index.html","id":"adding-chartacteristics-of-a-cohort","dir":"","previous_headings":"Example usage > Adding individuals´ chartacteristics","what":"Adding chartacteristics of a cohort","title":"Identify characteristics of patients in the OMOP Common Data Model","text":"tables OMOP CDM, can work similar way cohort tables. example, say cohort table can add age, age groups, sex, days prior history cohort like use information subset cohort. example limiting least 365 days prior history available cohort start date like ","code":"cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 1, 2 #> $ subject_id           <dbl> 1, 1, 2, 3 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-02-02, 2020-03-01 cdm$cohort1 <- cdm$cohort1 %>%    addAge(     cdm = cdm,      indexDate = \"cohort_start_date\",     ageGroup =  list(c(0, 18), c(19, 65), c(66, 100))   ) %>%    addSex(cdm = cdm) %>%    addPriorHistory(cdm = cdm)  cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 8 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 2, 1, 1, 1 #> $ subject_id           <dbl> 3, 1, 2, 1 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 #> $ cohort_end_date      <date> 2020-03-01, 2020-08-01, 2020-02-02, 2020-04-01 #> $ age                  <dbl> 43, 41, 51, 41 #> $ age_group            <chr> \"19 to 65\", \"19 to 65\", \"19 to 65\", \"19 to 65\" #> $ sex                  <chr> \"Female\", \"Male\", \"Male\", \"Male\" #> $ prior_history        <dbl> 4635, 5350, 4168, 5198 cdm$cohort1  %>%   filter(prior_history >= 365) #> # Source:   SQL [4 x 8] #> # Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date   age #>                  <dbl>      <dbl> <date>            <date>          <dbl> #> 1                    2          3 2020-01-01        2020-03-01         43 #> 2                    1          1 2020-06-01        2020-08-01         41 #> 3                    1          2 2020-01-02        2020-02-02         51 #> 4                    1          1 2020-01-01        2020-04-01         41 #> # ℹ 3 more variables: age_group <chr>, sex <chr>, prior_history <dbl>"},{"path":[]},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/index.html","id":"detect-the-presence-of-another-cohort-in-a-certain-window","dir":"","previous_headings":"Example usage > Cohort intersections","what":"Detect the presence of another cohort in a certain window","title":"Identify characteristics of patients in the OMOP Common Data Model","text":"can use addCohortIntersectFlag add flag presence () cohort certain window.","code":"cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 1, 2 #> $ subject_id           <dbl> 1, 1, 2, 3 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-02-02, 2020-03-01  cdm$cohort1  <- cdm$cohort1 %>%    addCohortIntersectFlag(     cdm = cdm,     targetCohortTable = \"cohort2\",     window = c(-Inf, -1)   )  cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 7 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 1, 2 #> $ subject_id           <dbl> 1, 1, 2, 3 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-02-02, 2020-03-01 #> $ cohort_1_minf_to_m1  <dbl> 1, 1, 0, 0 #> $ cohort_2_minf_to_m1  <dbl> 0, 1, 0, 0 #> $ cohort_3_minf_to_m1  <dbl> 0, 0, 1, 0"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/index.html","id":"count-appearences-of-a-certain-cohort-in-a-certain-window","dir":"","previous_headings":"Example usage > Cohort intersections","what":"Count appearences of a certain cohort in a certain window","title":"Identify characteristics of patients in the OMOP Common Data Model","text":"","code":"cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 1, 2 #> $ subject_id           <dbl> 1, 1, 2, 3 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-02-02, 2020-03-01  cdm$cohort1  <- cdm$cohort1 %>%    addCohortIntersectCount(     cdm = cdm,     targetCohortTable = \"cohort2\",     targetCohortId = 1,      window = list(\"short_term\" = c(1, 30), \"mid_term\" = c(31, 180))   )  cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 6 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 2, 1 #> $ subject_id           <dbl> 1, 1, 3, 2 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-01, 2020-01-02 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-03-01, 2020-02-02 #> $ cohort_1_short_term  <dbl> 0, 0, 0, 0 #> $ cohort_1_mid_term    <dbl> 1, 0, 0, 0"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/index.html","id":"add-a-column-with-the-firstlast-event-in-a-certain-window","dir":"","previous_headings":"Example usage > Cohort intersections","what":"Add a column with the first/last event in a certain window","title":"Identify characteristics of patients in the OMOP Common Data Model","text":"First occurrence: Last occurrence:","code":"cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 1, 2 #> $ subject_id           <dbl> 1, 1, 2, 3 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-02-02, 2020-03-01  cdm$cohort1  <- cdm$cohort1 %>%    addCohortIntersectDate(     cdm = cdm,     targetCohortTable = \"cohort2\",     targetCohortId = 1,     order = \"first\",     window = c(-Inf, Inf)   )  cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 2, 1 #> $ subject_id           <dbl> 1, 1, 3, 2 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-01, 2020-01-02 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-03-01, 2020-02-02 #> $ cohort_1_minf_to_inf <date> 2019-12-30, 2019-12-30, 2020-01-01, NA cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 1, 2 #> $ subject_id           <dbl> 1, 1, 2, 3 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-02-02, 2020-03-01  cdm$cohort1  <- cdm$cohort1 %>%    addCohortIntersectDate(     cdm = cdm,     targetCohortTable = \"cohort2\",     targetCohortId = 1,     order = \"last\",     window = c(-Inf, Inf)   )  cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 2, 1 #> $ subject_id           <dbl> 1, 1, 3, 2 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-01, 2020-01-02 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-03-01, 2020-02-02 #> $ cohort_1_minf_to_inf <date> 2020-05-25, 2020-05-25, 2020-01-01, NA"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/index.html","id":"add-the-time-instead-of-the-date","dir":"","previous_headings":"Example usage > Cohort intersections","what":"Add the time instead of the date","title":"Identify characteristics of patients in the OMOP Common Data Model","text":"","code":"cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 1, 2 #> $ subject_id           <dbl> 1, 1, 2, 3 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-02-02, 2020-03-01  cdm$cohort1  <- cdm$cohort1 %>%    addCohortIntersectTime(     cdm = cdm,     targetCohortTable = \"cohort2\",     targetCohortId = 1,     order = \"last\",     window = c(-Inf, Inf)   )  cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 2, 1 #> $ subject_id           <dbl> 1, 1, 3, 2 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-01, 2020-01-02 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-03-01, 2020-02-02 #> $ cohort_1_minf_to_inf <dbl> 145, -7, 0, NA"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/index.html","id":"combine-multiple-cohort-intersects","dir":"","previous_headings":"Example usage > Cohort intersections","what":"Combine multiple cohort intersects","title":"Identify characteristics of patients in the OMOP Common Data Model","text":"want combine multiple cohort intersects can concatenate operations using pipe operator: efficiency can intersects function:","code":"cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 1, 2 #> $ subject_id           <dbl> 1, 1, 2, 3 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-02-02, 2020-03-01  cdm$cohort1  <- cdm$cohort1 %>%    addCohortIntersectDate(     cdm = cdm,     targetCohortTable = \"cohort2\",     targetCohortId = 1,     order = \"last\",     window = c(-Inf, Inf)   ) %>%   addCohortIntersectCount(     cdm = cdm,     targetCohortTable = \"cohort2\",     targetCohortId = 1,     window = c(-Inf, Inf)   )  cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 2, 1 #> $ subject_id           <dbl> 1, 1, 3, 2 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-01, 2020-01-02 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-03-01, 2020-02-02 #> $ cohort_1_minf_to_inf <dbl> 2, 2, 1, NA cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 1, 2 #> $ subject_id           <dbl> 1, 1, 2, 3 #> $ cohort_start_date    <date> 2020-01-01, 2020-06-01, 2020-01-02, 2020-01-01 #> $ cohort_end_date      <date> 2020-04-01, 2020-08-01, 2020-02-02, 2020-03-01  cdm$cohort1  <- cdm$cohort1 %>%    addCohortIntersect(     cdm = cdm,     targetCohortTable = \"cohort2\",     targetCohortId = 1,     count = TRUE,     flag = TRUE,     time = TRUE,     date = TRUE,     window = list(\"any_time\" = c(-Inf, Inf))   )   cdm$cohort1 %>%    glimpse() #> Rows: ?? #> Columns: 8 #> Database: DuckDB 0.7.1 [martics@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id    <dbl> 1, 1, 2, 1 #> $ subject_id              <dbl> 1, 1, 3, 2 #> $ cohort_start_date       <date> 2020-01-01, 2020-06-01, 2020-01-01, 2020-01-02 #> $ cohort_end_date         <date> 2020-04-01, 2020-08-01, 2020-03-01, 2020-02-02 #> $ flag_cohort_1_any_time  <dbl> 1, 1, 1, 0 #> $ count_cohort_1_any_time <dbl> 2, 2, 1, 0 #> $ date_cohort_1_any_time  <date> 2019-12-30, 2019-12-30, 2020-01-01, NA #> $ time_cohort_1_any_time  <dbl> -2, -154, 0, NA"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/PatientProfiles-package.html","id":null,"dir":"Reference","previous_headings":"","what":"PatientProfiles: Identify characteristics of patients in the OMOP Common Data Model — PatientProfiles-package","title":"PatientProfiles: Identify characteristics of patients in the OMOP Common Data Model — PatientProfiles-package","text":"Identify characteristics patients data mapped Observational Medical Outcomes Partnership (OMOP) common data model.","code":""},{"path":[]},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/PatientProfiles-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"PatientProfiles: Identify characteristics of patients in the OMOP Common Data Model — PatientProfiles-package","text":"Maintainer: Marti Catala marti.catalasabate@ndorms.ox.ac.uk Authors: Yuchen Guo yuchen.guo@ndorms.ox.ac.uk Mike Du mike.du@ndorms.ox.ac.uk Kim Lopez-Guell kim.lopez@spc.ox.ac.uk Edward Burn edward.burn@ndorms.ox.ac.uk","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addAge.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the age of the individuals at a certain date — addAge","title":"Compute the age of the individuals at a certain date — addAge","text":"Compute age individuals certain date","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addAge.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the age of the individuals at a certain date — addAge","text":"","code":"addAge(   x,   cdm,   indexDate = \"cohort_start_date\",   ageName = \"age\",   ageGroup = NULL,   ageDefaultMonth = 1,   ageDefaultDay = 1,   ageImposeMonth = TRUE,   ageImposeDay = TRUE,   tablePrefix = NULL )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addAge.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the age of the individuals at a certain date — addAge","text":"x Table individuals cdm. cdm Object contains cdm reference. Use CDMConnector obtain cdm reference. indexDate Variable x contains date compute age. ageName Name new column contains age. ageGroup List age groups added. ageDefaultMonth Month year assigned individuals missing month birth. default: 1. ageDefaultDay day month assigned individuals missing day birth. default: 1. ageImposeMonth Whether month date birth considered missing individuals. ageImposeDay Whether day date birth considered missing individuals. tablePrefix stem permanent tables created. NULL, temporary tables used throughout.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addAge.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the age of the individuals at a certain date — addAge","text":"tibble age column added","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addAge.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute the age of the individuals at a certain date — addAge","text":"","code":"# \\donttest{ library(DBI) library(duckdb) library(tibble) library(PatientProfiles) cohort1 <- tibble::tibble(   cohort_definition_id = c(\"1\", \"1\", \"1\"),   subject_id = c(\"1\", \"2\", \"3\"),   cohort_start_date = c(     as.Date(\"2010-01-01\"), as.Date(\"2010-01-01\"), as.Date(\"2010-01-01\")   ),   cohort_end_date = c(     as.Date(\"2015-01-01\"), as.Date(\"2013-01-01\"), as.Date(\"2018-01-01\")   ) )  person <- tibble::tibble(   person_id = c(\"1\", \"2\", \"3\"),   gender_concept_id = c(\"8507\", \"8532\", \"8507\"),   year_of_birth = c(2000, 1995, NA),   month_of_birth = c(NA, 07, 08),   day_of_birth = c(01, 25, 03) ) cdm <- mockPatientProfiles(person = person, cohort1 = cohort1) addAge(x = cdm[[\"cohort1\"]], cdm = cdm) #> # Source:   table<dbplyr_001> [3 x 5] #> # Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date   age #>   <chr>                <chr>      <date>            <date>          <dbl> #> 1 1                    1          2010-01-01        2015-01-01         10 #> 2 1                    2          2010-01-01        2013-01-01         15 #> 3 1                    3          2010-01-01        2018-01-01         NA # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersect.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the intersect with a target cohort, you can compute the number of\noccurrences, a flag of presence, a certain date and/or the time difference — addCohortIntersect","title":"Compute the intersect with a target cohort, you can compute the number of\noccurrences, a flag of presence, a certain date and/or the time difference — addCohortIntersect","text":"Compute intersect target cohort, can compute number occurrences, flag presence, certain date /time difference","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the intersect with a target cohort, you can compute the number of\noccurrences, a flag of presence, a certain date and/or the time difference — addCohortIntersect","text":"","code":"addCohortIntersect(   x,   cdm,   targetCohortTable,   targetCohortId = NULL,   indexDate = \"cohort_start_date\",   targetStartDate = \"cohort_start_date\",   targetEndDate = \"cohort_end_date\",   window = list(c(0, Inf)),   order = \"first\",   flag = TRUE,   count = TRUE,   date = TRUE,   time = TRUE,   nameStyle = \"{value}_{cohort_name}_{window_name}\",   tablePrefix = NULL )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the intersect with a target cohort, you can compute the number of\noccurrences, a flag of presence, a certain date and/or the time difference — addCohortIntersect","text":"x Table individuals cdm cdm Object contains cdm reference. Use CDMConnector obtain cdm reference. targetCohortTable name cohort want check overlap targetCohortId vector cohort definition ids include indexDate Variable x contains date compute intersection. targetStartDate date reference cohort table, either start (overlap) (incidence) targetEndDate date reference cohort table, either end (overlap) NULL (incidence) window window consider events order record considered case multiple records flag TRUE FALSE. TRUE, flag calculated intersection count TRUE FALSE. TRUE, number counts calculated intersection date TRUE FALSE. TRUE, date calculated intersection time TRUE FALSE. TRUE, time differebce calculated intersection nameStyle naming added column columns, include required parameters tablePrefix stem permanent tables created. NULL, temporary tables used throughout.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersect.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the intersect with a target cohort, you can compute the number of\noccurrences, a flag of presence, a certain date and/or the time difference — addCohortIntersect","text":"table added columns overlap information","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersect.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute the intersect with a target cohort, you can compute the number of\noccurrences, a flag of presence, a certain date and/or the time difference — addCohortIntersect","text":"","code":"# \\donttest{ cohort1 <- dplyr::tibble(   cohort_definition_id = c(1, 1, 1, 1, 1),   subject_id = c(1, 1, 1, 2, 2),   cohort_start_date = as.Date(     c(       \"2020-01-01\",       \"2020-01-15\",       \"2020-01-20\",       \"2020-01-01\",       \"2020-02-01\"     )   ),   cohort_end_date = as.Date(     c(       \"2020-01-01\",       \"2020-01-15\",       \"2020-01-20\",       \"2020-01-01\",       \"2020-02-01\"     )   ) )  cohort2 <- dplyr::tibble(   cohort_definition_id = c(1, 1, 1, 1, 1, 1, 1),   subject_id = c(1, 1, 1, 2, 2, 2, 1),   cohort_start_date = as.Date(     c(       \"2020-01-15\",       \"2020-01-25\",       \"2020-01-26\",       \"2020-01-29\",       \"2020-03-15\",       \"2020-01-24\",       \"2020-02-16\"     )   ),   cohort_end_date = as.Date(     c(       \"2020-01-15\",       \"2020-01-25\",       \"2020-01-26\",       \"2020-01-29\",       \"2020-03-15\",       \"2020-01-24\",       \"2020-02-16\"     )   ), )  cdm <- mockPatientProfiles(cohort1 = cohort1, cohort2 = cohort2)  result <- cdm$cohort1 %>%   addCohortIntersect(     cdm = cdm,     targetCohortTable = \"cohort2\"   ) %>%   dplyr::collect() # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectCount.html","id":null,"dir":"Reference","previous_headings":"","what":"It creates columns to indicate number of occurrences of intersection with a\ncohort — addCohortIntersectCount","title":"It creates columns to indicate number of occurrences of intersection with a\ncohort — addCohortIntersectCount","text":"creates columns indicate number occurrences intersection cohort","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectCount.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"It creates columns to indicate number of occurrences of intersection with a\ncohort — addCohortIntersectCount","text":"","code":"addCohortIntersectCount(   x,   cdm,   targetCohortTable,   targetCohortId = NULL,   indexDate = \"cohort_start_date\",   targetStartDate = \"cohort_start_date\",   targetEndDate = \"cohort_end_date\",   window = list(c(0, Inf)),   nameStyle = \"{cohort_name}_{window_name}\",   tablePrefix = NULL )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectCount.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"It creates columns to indicate number of occurrences of intersection with a\ncohort — addCohortIntersectCount","text":"x Table individuals cdm cdm Object contains cdm reference. Use CDMConnector obtain cdm reference. targetCohortTable name cohort want check overlap targetCohortId vector cohort definition ids include indexDate Variable x contains date compute intersection. targetStartDate date reference cohort table, either start (overlap) (incidence) targetEndDate date reference cohort table, either end (overlap) NULL (incidence) window window consider events nameStyle naming added column columns, include required parameters tablePrefix stem permanent tables created. NULL, temporary tables used throughout.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectCount.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"It creates columns to indicate number of occurrences of intersection with a\ncohort — addCohortIntersectCount","text":"table added columns overlap information","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectCount.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"It creates columns to indicate number of occurrences of intersection with a\ncohort — addCohortIntersectCount","text":"","code":"# \\donttest{ library(PatientProfiles) library(dplyr) #>  #> Attaching package: ‘dplyr’ #> The following objects are masked from ‘package:stats’: #>  #>     filter, lag #> The following objects are masked from ‘package:base’: #>  #>     intersect, setdiff, setequal, union  cohort1 <- dplyr::tibble(   cohort_definition_id = c(1, 1, 1, 1, 1),   subject_id = c(1, 1, 1, 2, 2),   cohort_start_date = as.Date(     c(       \"2020-01-01\",       \"2020-01-15\",       \"2020-01-20\",       \"2020-01-01\",       \"2020-02-01\"     )   ),   cohort_end_date = as.Date(     c(       \"2020-01-01\",       \"2020-01-15\",       \"2020-01-20\",       \"2020-01-01\",       \"2020-02-01\"     )   ) )  cohort2 <- dplyr::tibble(   cohort_definition_id = c(1, 1, 1, 1, 1, 1, 1),   subject_id = c(1, 1, 1, 2, 2, 2, 1),   cohort_start_date = as.Date(     c(       \"2020-01-15\",       \"2020-01-25\",       \"2020-01-26\",       \"2020-01-29\",       \"2020-03-15\",       \"2020-01-24\",       \"2020-02-16\"     )   ),   cohort_end_date = as.Date(     c(       \"2020-01-15\",       \"2020-01-25\",       \"2020-01-26\",       \"2020-01-29\",       \"2020-03-15\",       \"2020-01-24\",       \"2020-02-16\"     )   ), )  cdm <- mockPatientProfiles(cohort1 = cohort1, cohort2 = cohort2)  result <- cdm$cohort1 %>%   addCohortIntersectCount(     cdm = cdm,     targetCohortTable = \"cohort2\"   ) %>%   dplyr::collect() # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectDate.html","id":null,"dir":"Reference","previous_headings":"","what":"Date of cohorts that are present in a certain window — addCohortIntersectDate","title":"Date of cohorts that are present in a certain window — addCohortIntersectDate","text":"Date cohorts present certain window","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectDate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Date of cohorts that are present in a certain window — addCohortIntersectDate","text":"","code":"addCohortIntersectDate(   x,   cdm,   indexDate = \"cohort_start_date\",   targetCohortTable,   targetCohortId = NULL,   targetDate = \"cohort_start_date\",   order = \"first\",   window = c(0, Inf),   nameStyle = \"{cohort_name}_{window_name}\",   tablePrefix = NULL )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectDate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Date of cohorts that are present in a certain window — addCohortIntersectDate","text":"x Table individuals cdm cdm Object contains cdm reference. Use CDMConnector obtain cdm reference. indexDate Variable x contains date compute intersection. targetCohortTable Cohort table targetCohortId Cohort IDs interest cohort table. NULL, cohorts used time variable added cohort interest targetDate Date interest cohort table. Either cohort_start_date cohort_end_date order date use multiple records individual window interest. Either first last. window Window time identify records relative indexDate. Records outside time period ignored. nameStyle naming added column columns, include required parameters tablePrefix stem permanent tables created. NULL, temporary tables used throughout.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectDate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Date of cohorts that are present in a certain window — addCohortIntersectDate","text":"x along additional columns cohort interest.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectDate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Date of cohorts that are present in a certain window — addCohortIntersectDate","text":"","code":"# \\donttest{ library(PatientProfiles) library(dplyr)  cohort1 <- dplyr::tibble(   cohort_definition_id = c(1, 1, 1, 1, 1),   subject_id = c(1, 1, 1, 2, 2),   cohort_start_date = as.Date(     c(       \"2020-01-01\",       \"2020-01-15\",       \"2020-01-20\",       \"2020-01-01\",       \"2020-02-01\"     )   ),   cohort_end_date = as.Date(     c(       \"2020-01-01\",       \"2020-01-15\",       \"2020-01-20\",       \"2020-01-01\",       \"2020-02-01\"     )   ) )  cohort2 <- dplyr::tibble(   cohort_definition_id = c(1, 1, 1, 1, 1, 1, 1),   subject_id = c(1, 1, 1, 2, 2, 2, 1),   cohort_start_date = as.Date(     c(       \"2020-01-15\",       \"2020-01-25\",       \"2020-01-26\",       \"2020-01-29\",       \"2020-03-15\",       \"2020-01-24\",       \"2020-02-16\"     )   ),   cohort_end_date = as.Date(     c(       \"2020-01-15\",       \"2020-01-25\",       \"2020-01-26\",       \"2020-01-29\",       \"2020-03-15\",       \"2020-01-24\",       \"2020-02-16\"     )   ), )  cdm <- mockPatientProfiles(cohort1 = cohort1, cohort2 = cohort2)  result <- cdm$cohort1 %>%   addCohortIntersectDate(     cdm = cdm,     targetCohortTable = \"cohort2\"   ) %>%   dplyr::collect() # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectFlag.html","id":null,"dir":"Reference","previous_headings":"","what":"It creates columns to indicate the presence of cohorts — addCohortIntersectFlag","title":"It creates columns to indicate the presence of cohorts — addCohortIntersectFlag","text":"creates columns indicate presence cohorts","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectFlag.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"It creates columns to indicate the presence of cohorts — addCohortIntersectFlag","text":"","code":"addCohortIntersectFlag(   x,   cdm,   targetCohortTable,   targetCohortId = NULL,   indexDate = \"cohort_start_date\",   targetStartDate = \"cohort_start_date\",   targetEndDate = \"cohort_end_date\",   window = list(c(0, Inf)),   nameStyle = \"{cohort_name}_{window_name}\",   tablePrefix = NULL )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectFlag.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"It creates columns to indicate the presence of cohorts — addCohortIntersectFlag","text":"x Table individuals cdm cdm Object contains cdm reference. Use CDMConnector obtain cdm reference. targetCohortTable name cohort want check overlap targetCohortId vector cohort definition ids include indexDate Variable x contains date compute intersection. targetStartDate date reference cohort table, either start (overlap) (incidence) targetEndDate date reference cohort table, either end (overlap) NULL (incidence) window window consider events nameStyle naming added column columns, include required parameters tablePrefix stem permanent tables created. NULL, temporary tables used throughout.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectFlag.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"It creates columns to indicate the presence of cohorts — addCohortIntersectFlag","text":"table added columns overlap information","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectFlag.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"It creates columns to indicate the presence of cohorts — addCohortIntersectFlag","text":"","code":"# \\donttest{ cohort1 <- dplyr::tibble(   cohort_definition_id = c(1, 1, 1, 1, 1),   subject_id = c(1, 1, 1, 2, 2),   cohort_start_date = as.Date(     c(       \"2020-01-01\",       \"2020-01-15\",       \"2020-01-20\",       \"2020-01-01\",       \"2020-02-01\"     )   ),   cohort_end_date = as.Date(     c(       \"2020-01-01\",       \"2020-01-15\",       \"2020-01-20\",       \"2020-01-01\",       \"2020-02-01\"     )   ) )  cohort2 <- dplyr::tibble(   cohort_definition_id = c(1, 1, 1, 1, 1, 1, 1),   subject_id = c(1, 1, 1, 2, 2, 2, 1),   cohort_start_date = as.Date(     c(       \"2020-01-15\",       \"2020-01-25\",       \"2020-01-26\",       \"2020-01-29\",       \"2020-03-15\",       \"2020-01-24\",       \"2020-02-16\"     )   ),   cohort_end_date = as.Date(     c(       \"2020-01-15\",       \"2020-01-25\",       \"2020-01-26\",       \"2020-01-29\",       \"2020-03-15\",       \"2020-01-24\",       \"2020-02-16\"     )   ), )  cdm <- mockPatientProfiles(cohort1 = cohort1, cohort2 = cohort2)  result <- cdm$cohort1 %>%   addCohortIntersectFlag(     cdm = cdm,     targetCohortTable = \"cohort2\"   ) %>%   dplyr::collect() # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectTime.html","id":null,"dir":"Reference","previous_headings":"","what":"It creates columns to indicate the time between the current table and a\ntarget cohort — addCohortIntersectTime","title":"It creates columns to indicate the time between the current table and a\ntarget cohort — addCohortIntersectTime","text":"creates columns indicate time current table target cohort","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectTime.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"It creates columns to indicate the time between the current table and a\ntarget cohort — addCohortIntersectTime","text":"","code":"addCohortIntersectTime(   x,   cdm,   indexDate = \"cohort_start_date\",   targetCohortTable,   targetCohortId = NULL,   targetDate = \"cohort_start_date\",   order = \"first\",   window = c(0, Inf),   nameStyle = \"{cohort_name}_{window_name}\",   tablePrefix = NULL )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectTime.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"It creates columns to indicate the time between the current table and a\ntarget cohort — addCohortIntersectTime","text":"x Table individuals cdm cdm Object contains cdm reference. Use CDMConnector obtain cdm reference. indexDate Variable x contains date compute intersection. targetCohortTable Cohort table targetCohortId Cohort IDs interest cohort table. NULL, cohorts used time variable added cohort interest targetDate Date interest cohort table. Either cohort_start_date cohort_end_date order date use multiple records individual window interest. Either first last. window Window time identify records relative indexDate. Records outside time period ignored. nameStyle naming added column columns, include required parameters tablePrefix stem permanent tables created. NULL, temporary tables used throughout.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectTime.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"It creates columns to indicate the time between the current table and a\ntarget cohort — addCohortIntersectTime","text":"x along additional columns cohort interest.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addCohortIntersectTime.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"It creates columns to indicate the time between the current table and a\ntarget cohort — addCohortIntersectTime","text":"","code":"# \\donttest{ library(PatientProfiles) library(dplyr)  cohort1 <- dplyr::tibble(   cohort_definition_id = c(1, 1, 1, 1, 1),   subject_id = c(1, 1, 1, 2, 2),   cohort_start_date = as.Date(     c(       \"2020-01-01\",       \"2020-01-15\",       \"2020-01-20\",       \"2020-01-01\",       \"2020-02-01\"     )   ),   cohort_end_date = as.Date(     c(       \"2020-01-01\",       \"2020-01-15\",       \"2020-01-20\",       \"2020-01-01\",       \"2020-02-01\"     )   ) )  cohort2 <- dplyr::tibble(   cohort_definition_id = c(1, 1, 1, 1, 1, 1, 1),   subject_id = c(1, 1, 1, 2, 2, 2, 1),   cohort_start_date = as.Date(     c(       \"2020-01-15\",       \"2020-01-25\",       \"2020-01-26\",       \"2020-01-29\",       \"2020-03-15\",       \"2020-01-24\",       \"2020-02-16\"     )   ),   cohort_end_date = as.Date(     c(       \"2020-01-15\",       \"2020-01-25\",       \"2020-01-26\",       \"2020-01-29\",       \"2020-03-15\",       \"2020-01-24\",       \"2020-02-16\"     )   ), )  cdm <- mockPatientProfiles(cohort1 = cohort1, cohort2 = cohort2)  result <- cdm$cohort1 %>%   addCohortIntersectTime(     cdm = cdm,     targetCohortTable = \"cohort2\"   ) %>%   dplyr::collect() # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addDemographics.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute demographic characteristics at a certain date — addDemographics","title":"Compute demographic characteristics at a certain date — addDemographics","text":"Compute demographic characteristics certain date","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addDemographics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute demographic characteristics at a certain date — addDemographics","text":"","code":"addDemographics(   x,   cdm,   indexDate = \"cohort_start_date\",   age = TRUE,   ageName = \"age\",   ageDefaultMonth = 1,   ageDefaultDay = 1,   ageImposeMonth = TRUE,   ageImposeDay = TRUE,   ageGroup = NULL,   sex = TRUE,   sexName = \"sex\",   priorHistory = TRUE,   priorHistoryName = \"prior_history\",   futureObservation = TRUE,   futureObservationName = \"future_observation\",   tablePrefix = NULL )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addDemographics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute demographic characteristics at a certain date — addDemographics","text":"x Table individuals cdm cdm Object contains cdm reference. Use CDMConnector obtain cdm reference. indexDate Variable x contains date compute demographics characteristics. age TRUE FALSE. TRUE, age calculated relative indexDate ageName Age variable name ageDefaultMonth Month year assigned individuals missing month birth. ageDefaultDay day month assigned individuals missing day birth. ageImposeMonth TRUE FALSE. Whether month date birth considered missing individuals. ageImposeDay TRUE FALSE. Whether day date birth considered missing individuals. ageGroup NULL, list ageGroup vectors sex TRUE FALSE. TRUE, sex identified sexName Sex variable name priorHistory TRUE FALSE. TRUE, days start current observation period indexDate calculated priorHistoryName Prior history variable name futureObservation TRUE FALSE. TRUE, days indexDate end current observation period calculated futureObservationName Future observation variable name tablePrefix stem permanent tables created. NULL, temporary tables used throughout.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addDemographics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute demographic characteristics at a certain date — addDemographics","text":"cohort table added demographic information columns","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addDemographics.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute demographic characteristics at a certain date — addDemographics","text":"","code":"# \\donttest{ library(PatientProfiles) cdm <- mockPatientProfiles() cdm$cohort1 %>% addDemographics(cdm) #> # Source:   table<dbplyr_030> [4 x 8] #> # Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date   age sex   #>                  <dbl>      <dbl> <date>            <date>          <dbl> <chr> #> 1                    1          1 2020-01-01        2020-04-01         26 Male  #> 2                    1          1 2020-06-01        2020-08-01         26 Male  #> 3                    1          2 2020-01-02        2020-02-02         NA NA    #> 4                    2          3 2020-01-01        2020-03-01         NA NA    #> # ℹ 2 more variables: prior_history <dbl>, future_observation <dbl> # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addFutureObservation.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the number of days till the end of the observation period at a\ncertain date — addFutureObservation","title":"Compute the number of days till the end of the observation period at a\ncertain date — addFutureObservation","text":"Compute number days till end observation period certain date","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addFutureObservation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the number of days till the end of the observation period at a\ncertain date — addFutureObservation","text":"","code":"addFutureObservation(   x,   cdm,   indexDate = \"cohort_start_date\",   futureObservationName = \"future_observation\",   tablePrefix = NULL )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addFutureObservation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the number of days till the end of the observation period at a\ncertain date — addFutureObservation","text":"x Table individuals cdm. cdm Object contains cdm reference. Use CDMConnector obtain cdm reference. indexDate Variable x contains date compute future observation. futureObservationName name new column added tablePrefix stem permanent tables created. NULL, temporary tables used throughout.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addFutureObservation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the number of days till the end of the observation period at a\ncertain date — addFutureObservation","text":"cohort table added column containing future observation individuals","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addFutureObservation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute the number of days till the end of the observation period at a\ncertain date — addFutureObservation","text":"","code":"# \\donttest{ library(DBI) library(duckdb) library(tibble) library(PatientProfiles) cohort1 <- tibble::tibble(   cohort_definition_id = c(\"1\", \"1\", \"1\"),   subject_id = c(\"1\", \"2\", \"3\"),   cohort_start_date = c(     as.Date(\"2010-03-03\"),     as.Date(\"2010-03-01\"),     as.Date(\"2010-02-01\")   ),   cohort_end_date = c(     as.Date(\"2015-01-01\"),     as.Date(\"2013-01-01\"),     as.Date(\"2013-01-01\")   ) )  obs_1 <- tibble::tibble(   observation_period_id = c(\"1\", \"2\", \"3\"),   person_id = c(\"1\", \"2\", \"3\"),   observation_period_start_date = c(     as.Date(\"2010-02-03\"),     as.Date(\"2010-02-01\"),     as.Date(\"2010-01-01\")   ),   observation_period_end_date = c(     as.Date(\"2014-01-01\"),     as.Date(\"2012-01-01\"),     as.Date(\"2012-01-01\")   ) )  cdm <-   mockPatientProfiles(     seed = 1,     cohort1 = cohort1,     observation_period = obs_1   )  result <- cdm$cohort1 %>% addFutureObservation(cdm) # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addInObservation.html","id":null,"dir":"Reference","previous_headings":"","what":"Indicate if a certain record is within the observation period — addInObservation","title":"Indicate if a certain record is within the observation period — addInObservation","text":"Indicate certain record within observation period","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addInObservation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Indicate if a certain record is within the observation period — addInObservation","text":"","code":"addInObservation(   x,   cdm,   indexDate = \"cohort_start_date\",   name = \"in_observation\",   tablePrefix = NULL )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addInObservation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Indicate if a certain record is within the observation period — addInObservation","text":"x Table individuals cdm. cdm Object contains cdm reference. Use CDMConnector obtain cdm reference. indexDate Variable x contains date compute observation flag. name name column hold result enquiry: 1 individual observation, 0 tablePrefix stem permanent tables created. NULL, temporary tables used throughout.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addInObservation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Indicate if a certain record is within the observation period — addInObservation","text":"cohort table added binary column assessing inObservation","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addInObservation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Indicate if a certain record is within the observation period — addInObservation","text":"","code":"# \\donttest{ library(PatientProfiles) cdm <- mockPatientProfiles() cdm$cohort1 %>% addInObservation(cdm) #> # Source:   table<dbplyr_033> [4 x 5] #> # Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <dbl>      <dbl> <date>            <date>          #> 1                    1          1 2020-01-01        2020-04-01      #> 2                    1          1 2020-06-01        2020-08-01      #> 3                    1          2 2020-01-02        2020-02-02      #> 4                    2          3 2020-01-01        2020-03-01      #> # ℹ 1 more variable: in_observation <dbl> # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addPriorHistory.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the number of days of prior history in the current observation period\nat a certain date — addPriorHistory","title":"Compute the number of days of prior history in the current observation period\nat a certain date — addPriorHistory","text":"Compute number days prior history current observation period certain date","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addPriorHistory.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the number of days of prior history in the current observation period\nat a certain date — addPriorHistory","text":"","code":"addPriorHistory(   x,   cdm,   indexDate = \"cohort_start_date\",   priorHistoryName = \"prior_history\",   tablePrefix = NULL )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addPriorHistory.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the number of days of prior history in the current observation period\nat a certain date — addPriorHistory","text":"x Table individuals cdm cdm Object contains cdm reference. Use CDMConnector obtain cdm reference. indexDate Variable x contains date compute prior history. priorHistoryName name new column added tablePrefix stem permanent tables created. NULL, temporary tables used throughout.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addPriorHistory.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the number of days of prior history in the current observation period\nat a certain date — addPriorHistory","text":"cohort table added column containing prior history individuals","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addPriorHistory.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute the number of days of prior history in the current observation period\nat a certain date — addPriorHistory","text":"","code":"# \\donttest{ library(DBI) library(duckdb) library(tibble) library(PatientProfiles) cohort1 <- tibble::tibble(   cohort_definition_id = c(\"1\", \"1\", \"1\"),   subject_id = c(\"1\", \"2\", \"3\"),   cohort_start_date = c(     as.Date(\"2010-03-03\"),     as.Date(\"2010-03-01\"),     as.Date(\"2010-02-01\")   ),   cohort_end_date = c(     as.Date(\"2015-01-01\"),     as.Date(\"2013-01-01\"),     as.Date(\"2013-01-01\")   ) )  obs_1 <- tibble::tibble(   observation_period_id = c(\"1\", \"2\", \"3\"),   person_id = c(\"1\", \"2\", \"3\"),   observation_period_start_date = c(     as.Date(\"2010-02-03\"),     as.Date(\"2010-02-01\"),     as.Date(\"2010-01-01\")   ),   observation_period_end_date = c(     as.Date(\"2014-01-01\"),     as.Date(\"2012-01-01\"),     as.Date(\"2012-01-01\")   ) )  cdm <-   mockPatientProfiles(     seed = 1,     cohort1 = cohort1,     observation_period = obs_1   )  result <- cdm$cohort1 %>% addPriorHistory(cdm) # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addSex.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the sex of the individuals — addSex","title":"Compute the sex of the individuals — addSex","text":"Compute sex individuals","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addSex.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the sex of the individuals — addSex","text":"","code":"addSex(x, cdm, sexName = \"sex\", tablePrefix = NULL)"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addSex.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the sex of the individuals — addSex","text":"x Table individuals cdm cdm Object contains cdm reference. Use CDMConnector obtain cdm reference. sexName name new column added tablePrefix stem permanent tables created. NULL, temporary tables used throughout.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addSex.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the sex of the individuals — addSex","text":"table x added column sex information","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/addSex.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute the sex of the individuals — addSex","text":"","code":"# \\donttest{ library(PatientProfiles) cdm <- mockPatientProfiles() cdm$cohort1 %>% addSex(cdm) #> # Source:   table<dbplyr_035> [4 x 5] #> # Database: DuckDB 0.7.1 [unknown@Linux 5.15.0-1036-azure:R 4.3.0/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date sex   #>                  <dbl>      <dbl> <date>            <date>          <chr> #> 1                    1          1 2020-01-01        2020-04-01      Male  #> 2                    1          1 2020-06-01        2020-08-01      Male  #> 3                    1          2 2020-01-02        2020-02-02      NA    #> 4                    2          3 2020-01-01        2020-03-01      NA    # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/mockPatientProfiles.html","id":null,"dir":"Reference","previous_headings":"","what":"It creates a mock database for testing PatientProfiles package — mockPatientProfiles","title":"It creates a mock database for testing PatientProfiles package — mockPatientProfiles","text":"creates mock database testing PatientProfiles package","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/mockPatientProfiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"It creates a mock database for testing PatientProfiles package — mockPatientProfiles","text":"","code":"mockPatientProfiles(   drug_exposure = NULL,   drug_strength = NULL,   observation_period = NULL,   condition_occurrence = NULL,   visit_occurrence = NULL,   concept_ancestor = NULL,   person = NULL,   cohort1 = NULL,   cohort2 = NULL,   drug_concept_id_size = 5,   ancestor_concept_id_size = 5,   condition_concept_id_size = 5,   visit_concept_id_size = 5,   visit_occurrence_id_size = 5,   ingredient_concept_id_size = 1,   drug_exposure_size = 10,   patient_size = 1,   min_drug_exposure_start_date = \"2000-01-01\",   max_drug_exposure_start_date = \"2020-01-01\",   earliest_date_of_birth = NULL,   latest_date_of_birth = NULL,   earliest_observation_start_date = NULL,   latest_observation_start_date = NULL,   min_days_to_observation_end = NULL,   max_days_to_observation_end = NULL,   earliest_condition_start_date = NULL,   latest_condition_start_date = NULL,   min_days_to_condition_end = NULL,   max_days_to_condition_end = NULL,   earliest_visit_start_date = NULL,   latest_visit_start_date = NULL,   min_days_to_visit_end = NULL,   max_days_to_visit_end = NULL,   seed = 1,   ... )"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/mockPatientProfiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"It creates a mock database for testing PatientProfiles package — mockPatientProfiles","text":"drug_exposure default null user can define table drug_strength default null user can define table observation_period default null user can define table condition_occurrence default null user can define table visit_occurrence default null user can define visit_occurrence table concept_ancestor concept ancestor table person default null user can define table cohort1 cohort table test run getindication cohort2 cohort table test run getindication drug_concept_id_size number unique drug concept id ancestor_concept_id_size size ceoncept ancestor table condition_concept_id_size number unique row condition concept table visit_concept_id_size number unique visit concept id visit_occurrence_id_size number unique visit occurrence id ingredient_concept_id_size number unique drug ingredient concept id drug_exposure_size number unique drug exposure patient_size number unique patient min_drug_exposure_start_date user define minimum drug exposure start date max_drug_exposure_start_date user define maximium drug exposure start date earliest_date_of_birth earliest date birth patient person table format \"dd-mm-yyyy\" latest_date_of_birth latest date birth patient person table format \"dd-mm-yyyy\" earliest_observation_start_date earliest observation start date patient format \"dd-mm-yyyy\" latest_observation_start_date latest observation start date patient format \"dd-mm-yyyy\" min_days_to_observation_end minimum number days observational integer max_days_to_observation_end maximum number days observation period integer earliest_condition_start_date earliest condition start date patient format \"dd-mm-yyyy\" latest_condition_start_date latest condition start date patient format \"dd-mm-yyyy\" min_days_to_condition_end minimum number days condition integer max_days_to_condition_end maximum number days condition integer earliest_visit_start_date earliest visit start date patient format \"dd-mm-yyyy\" latest_visit_start_date latest visit start date patient format \"dd-mm-yyyy\" min_days_to_visit_end minimum number days visit integer max_days_to_visit_end maximum number days visit integer seed seed ... user self defined tibble table put cdm, can input many user want","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/mockPatientProfiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"It creates a mock database for testing PatientProfiles package — mockPatientProfiles","text":"cdm mock database following user's specifications","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/mockPatientProfiles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"It creates a mock database for testing PatientProfiles package — mockPatientProfiles","text":"","code":"# \\donttest{ library(PatientProfiles) cdm <- mockPatientProfiles() # }"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://oxford-pharmacoepi.github.io/PatientProfiles/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling `rhs(lhs)`.","code":""}]
